# Repository Guidelines

## Project Structure & Module Organization

- `src/`: TypeScript source for the `multicodex` CLI.
  - CLI entry: `src/cli.ts`
  - Auth swapping: `src/auth-swap.ts`
  - Config: `src/config.ts`
- `test/`: Unit tests (`bun:test`).
- `docs/`: User documentation.
- `dist/`: Build output (`dist/cli.js`, generated by `bun run build`).
- `scripts/`: Build/release helpers.

## Build, Test, and Development Commands

- `bun install`: install dependencies.
- `bun run dev`: run CLI from source.
- `bun run test`: run unit tests.
- `bun run typecheck`: run TypeScript typechecking.
- `bun run build`: bundle CLI to `dist/cli.js`.
- `npm pack`: preview npm tarball.

## Coding Style & Naming Conventions

- Language: TypeScript (ESM).
- Prefer small, focused modules in `src/` with explicit exports.
- Naming:
  - files: `kebab-case.ts` for modules (e.g. `auth-swap.ts`)
  - functions: `camelCase`
  - types: `PascalCase`
- Keep CLI output and error messages actionable and user-facing.

## Testing Guidelines

- Framework: `bun:test`.
- Add tests for new behaviors and edge cases (flags, argument parsing, file I/O).
- Test files live under `test/` and use `*.test.ts` naming.

## Commit & Pull Request Guidelines

- Commit messages follow Conventional Commits (e.g. `feat:`, `fix:`, `docs:`, `chore:`, `refactor:`).
- PRs should include:
  - a short description of the behavior change
  - updated docs if CLI UX changes (`README.md`, `docs/`)
  - tests for non-trivial logic changes

## Agent-Specific Instructions

- Do not create git commits (or rewrite history) unless explicitly asked.

## Security & Configuration Tips

- `multicodex` swaps `~/.codex/auth.json` under a lock; avoid manual edits while it is running.
- Local state is stored under `~/.config/multicodex` (override with `MULTICODEX_HOME` for testing).
